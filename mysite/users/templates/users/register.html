{% extends "homepage/base.html" %}
{% load crispy_forms_tags %}
{% block content %}
    <div class="content-section">
        <form method="POST">
            {% csrf_token %}
            <fieldset class="form-group">
                <legend class="border-bottom mb-4">Sign Up</legend>
                {{ postcode_form|crispy }}
                <p class="postcode-warning"> Sorry - for now you must have a PO19 postcode to sign up </p>

                {{ user_form|crispy }}
            </fieldset>
            <div class="form-group">
                <button class="btn btn-outline-info" type="submit">Sign Up</button>
            </div>
        </form>
        <div class="border-top pt-3">
            <small class="text-muted">
                Already Have An Account? <a class="ml-2" href="{% url 'login' %}">Login</a>
            </small>
        </div>
    </div>
    <script>

        $("#id_postcode").focus(function() {
            $(".postcode-warning").hide();}
            ).blur(function() {
            if (this.value && !this.value.startsWith('PO19')){
            $(".postcode-warning").show();
            console.log('INVALID POSTCODE');
            }
            });
    </script>

{% endblock content %}